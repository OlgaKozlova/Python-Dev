# День 22 — несколько файлов и импорты (без пакетов)

## Контекст

На этом этапе проект состоит из нескольких `.py` файлов в одном каталоге. Пакеты, `__init__.py`, `-m` и относительные импорты **ещё не используются**.

---

## 1. Один entrypoint

В проекте запускается **ровно один файл** (обычно `main.py`).
Все остальные файлы:

- никогда не запускаются как сервис;
- существуют только для импорта.

Это ключевое правило, без которого импорты начинают вести себя непредсказуемо.

---

## 2. Как работают импорты на этом этапе

Если все файлы лежат в одном каталоге, импорты делаются **по имени файла**:

```python
import logger
import formatter
```

Причина: каталог запуска добавляется в `sys.path`, и Python находит соседние модули.

---

## 3. Кросс-импорты

Кросс-импорт — это когда модули импортируют друг друга.

Проблема возникает не из-за вызовов функций, а потому что **импорт — это выполнение кода**. При цикле один из модулей оказывается **частично инициализированным**.

Вывод:

- кросс-импорт — архитектурная ошибка;
- лечится разнесением ответственностей, а не перестановкой импортов.

---

## 4. Импорт внутри функции

Импорт внутри функции:

```python
def f():
    import other
    other.g()
```

Допустим, но:

- ухудшает читаемость;
- скрывает зависимости;
- используется только как временный костыль для разрыва цикла.

Норма — импорты вверху файла.

---

## 5. `if __name__ == "__main__"`

На этом этапе используется **только для локальной проверки модуля**.

```python
if __name__ == "__main__":
    print(test())
```

Этот код:

- не участвует в работе сервиса;
- не должен менять глобальное состояние;
- допускается как изолированный самотест.

---

## 6. Корень проекта и запуск

Корень для импортов — это **папка, из которой запускается Python**.

Правило:

- всегда запускать из одной и той же директории (обычно корень проекта);
- не запускать вложенные файлы напрямую;
- не править `sys.path` вручную.

---

## Граница темы

Как только появляются подпапки и сомнения «откуда запускать» — это конец дня 22 и переход к пакетам (день 23).
