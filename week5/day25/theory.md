# День 25 — Мини-проект и модель импорта

## Задача дня

Закрепить _поведенческую_ модель импорта в Python:

- что считается корнем проекта;
- что такое точка входа;
- как формируется `sys.path`;
- почему запуск файла ≠ использование модуля.

Цель — убрать иллюзию «вроде понятно» и заменить её устойчивым объяснением происходящего.

---

## Корень проекта и точка входа

Python **не знает понятия «проект»**. Он знает только:

- файл, который запустили (`__main__`);
- список путей поиска модулей (`sys.path`).

Первый элемент `sys.path` — **каталог запуска**, а не «где лежит файл».

- `python app.py` → `sys.path[0]` = корень проекта
- `python services/math_utils.py` → `sys.path[0]` = `services/`

Это два _разных мира импорта_.

---

## Почему модули не запускают напрямую

Файл сервиса:

- предполагает, что его **импортируют**,
- не управляет окружением,
- не выбирает рабочую директорию.

Запуск такого файла напрямую:

- ломает абсолютные импорты от корня,
- превращает внутренний модуль в «псевдо-приложение»,
- создаёт нестабильную структуру проекта.

Поэтому правило:

> **Точка входа — одна. Сервисы не запускаются.**

---

## Абсолютные импорты

Используются импорты вида:

```python
from services.math_utils import multiply
```

Они:

- читаемы;
- однозначны;
- работают одинаково в проде, тестах, CLI.

Относительные импорты (`from . import ...`) — позже, в больших пакетах.

---

## Почему config — особый случай

`config.py`:

- не импортирует другие модули проекта;
- не содержит логики выполнения;
- не имеет побочных эффектов.

Поэтому он:

- безопасен при импорте;
- не участвует в циклах;
- может использоваться на любом уровне.

---

## Циклы импортов

Цикл — это не только `A → B → A`.

Опаснее:

- частично инициализированные модули;
- код, который выполняется при импорте;
- доступ к атрибутам, которые ещё не созданы.

Поэтому:

- `app` **никогда** не импортируется из сервисов;
- зависимости направлены в одну сторону.

---

## Итоговая модель

- Python исполняет файл целиком при импорте.
- Импорт — это **выполнение**, а не подключение.
- Точка входа определяет весь мир импортов.
- Структура важнее удобства запуска.

Если это усвоено — день 25 закрыт.
