# День 15 — Практика

## Задача 1 — выражение vs элемент

```python
def f(x):
    print("f", x)
    return x * 2

result = [f(x) for x in [1, 2, 3] if x % 2 == 1]
print(result)
```

**Вопросы:**

- Сколько раз вызывается `f`
- Что именно попадает в `result`
- Почему

---

## Задача 2 — побочные эффекты в `if`

```python
log = []

def g(x):
    log.append(x)
    return x > 1

result = [x * 10 for x in [0, 1, 2] if g(x)]
```

**Вопросы:**

- Когда вызывается `g`
- Почему `log` и `result` различаются

---

## Задача 3 — short-circuit и двойные вызовы

```python
def p(x):
    print("p", x)
    return x

result = [p(x) for x in [0, 1, 2] if x and p(x)]
print(result)
```

**Вопросы:**

- Для каких `x` `p` не вызывается
- Почему для некоторых `x` `p` вызывается дважды

---

## Решения и пояснения

### Задача 1

- `f` вызывается для `x = 1` и `x = 3`
- `result = [2, 6]`
- В список попадает результат выражения `f(x)`

### Задача 2

- `g` вызывается для всех элементов
- `log = [0, 1, 2]`
- `result = [20]`
- `if` не фильтр без последствий, а вычисляемое выражение

### Задача 3

- Для `x = 0` `p` не вызывается из-за short-circuit
- Для `x = 1` и `x = 2` `p` вызывается дважды
- `result = [1, 2]`

---

## Рекомендация

Если comprehension требует объяснений дольше одной строки — перепиши в обычный `for`.
