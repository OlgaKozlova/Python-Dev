# День 27 — Несколько except и finally

## Несколько except

В Python блоки `except` проверяются **сверху вниз**. Срабатывает первый подходящий тип исключения.

```python
try:
    x = int(value)
except ValueError:
    ...
except TypeError:
    ...
except Exception:
    ...
```

Правило: **от более конкретного к более общему**. Если поставить `Exception` первым — остальные `except` становятся мёртвым кодом.

Можно ловить несколько типов сразу:

```python
except (ValueError, TypeError):
    ...
```

Это допустимо **только если обработка одинакова**. Если логика различается — исключения разделяются.

---

## finally

`finally` выполняется **всегда**:

- было исключение или нет
- было `return` или нет
- исключение поймано или проброшено дальше

Типичное назначение — освобождение ресурсов.

```python
try:
    f = open(path)
    data = f.read()
finally:
    f.close()
```

Даже если `read()` упадёт, `close()` выполнится.

---

## Опасное место: return в finally

```python
try:
    return 1
finally:
    return 2
```

Вернётся `2`. `finally` **перебивает** `return` из `try`.

Практически всегда это ошибка проектирования.

---

## Ментальная модель

- `try` — что может сломаться
- `except` — что я **ожидаю** и умею корректно обработать
- `finally` — что **обязано выполниться при любом исходе**

Пустой `except` = подавление ошибки. Допустимо только осознанно и редко.
