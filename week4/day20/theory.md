# День 20 — lambda и assignment expression

## Что такое lambda в Python

`lambda` — это выражение, создающее объект функции.

```python
f = lambda x: x * 2
```

Эквивалентно:

```python
def f(x):
    return x * 2
```

Ключевая идея: **lambda — не особый вид функции**, а альтернативный синтаксис с жёсткими ограничениями.

---

## Ограничения lambda

- только **одно выражение**
- нельзя писать инструкции (`if`, `for`, `while`, `try`, `=`)
- можно использовать только expression (`a if cond else b`, `:=`, вызовы функций)
- нет имени (ухудшает дебаг и трассировки)

Если логика не помещается в одну простую строку — `lambda` неуместна.

---

## lambda и функции как объекты

В Python функции — объекты первого класса:

- их можно передавать как аргументы
- хранить в структурах данных
- возвращать из функций

Это относится **одинаково** к `def` и `lambda`.

---

## Assignment expression (`:=`)

`:=` — оператор присваивания-выражения.

```python
if (n := len(data)) > 10:
    print(n)
```

Он:

- присваивает значение
- и одновременно возвращает его

Добавлен **не для lambda**, а для `if / while / comprehension`.

Использование `:=` внутри `lambda` допустимо синтаксически, но считается **плохим стилем**.

---

## Expression vs Statement

В `lambda` разрешены **только выражения**.

| Конструкция        | Тип           |
| ------------------ | ------------- |
| `if:`              | statement ❌  |
| `a if cond else b` | expression ✅ |
| `=`                | statement ❌  |
| `:=`               | expression ✅ |

Практическое правило:

> В `lambda` можно всё, что не требует двоеточий и блоков.

---

## Замыкания и позднее связывание (late binding)

Функции **не захватывают значения**, они захватывают **имена**.

Значение подставляется **в момент вызова**, а не создания функции.

Это касается:

- `lambda`
- `def`
- всех closures

Из-за этого `lambda` внутри циклов — зона риска.

---

## Практическое правило

- если `lambda` внутри цикла использует переменную цикла — остановиться
- либо использовать аргумент по умолчанию
- либо писать фабрику через `def`

---

## Итог

- `lambda` — узкий инструмент для локальной логики
- не предназначена для сложных выражений
- читаемость важнее краткости
- если нужна переменная, ветвление или расширяемость — используй `def`
