# День 16 — Функции (def, аргументы, return)

## 1. Функция как объект

В Python функция — это объект, создаваемый инструкцией `def` во время выполнения кода.

```python
def f(x):
    return x + 1
```

- `def` **создаёт объект функции** и привязывает его к имени
- тело функции **не выполняется** при объявлении
- функция живёт в namespace, а не в стеке

Формула:

> `def` → объект функции
> `()` → новый фрейм стека

---

## 2. Фрейм стека

Фрейм стека создаётся **только при вызове функции** и содержит:

- локальные переменные
- параметры функции
- ссылку на код функции
- ссылку на глобальную область
- указатель текущей инструкции

После `return` фрейм уничтожается.

---

## 3. Аргументы функции

Аргументы в Python — это **привязка имён к объектам** в новом фрейме.

```python
def f(a, b):
    ...

f(1, 2)
```

Эквивалентно внутри фрейма:

```python
a = 1
b = 2
```

Поддерживаются:

- позиционные аргументы
- именованные аргументы

Правило:

- сначала позиционные
- затем именованные

Ошибки связывания (`TypeError`) возникают **до выполнения тела функции**.

---

## 4. return

`return`:

- немедленно завершает выполнение функции
- возвращает **один объект**
- уничтожает текущий фрейм стека

Если `return` отсутствует — возвращается `None`.

```python
def g():
    pass

result = g()  # None
```

Несколько `return` — нормальный и читаемый стиль.

---

## 5. Возврат нескольких значений

```python
def f():
    return 1, 2, 3
```

Фактически возвращается **кортеж**:

```python
(1, 2, 3)
```

Распаковка происходит снаружи функции:

```python
a, b, c = f()
```

---

## 6. Функции и замыкания (минимум)

Если функция объявлена внутри другой функции, она может захватывать внешние переменные.

```python
def outer():
    x = 10
    def inner():
        return x + 1
    return inner
```

- `x` хранится **не в стеке**
- `x` хранится в объекте **closure (cell)**
- функция содержит ссылку на closure

Замыкание живёт, пока на функцию есть ссылки.

---

## Граница темы

В этом дне **не рассматриваются**:

- области видимости (LEGB)
- значения аргументов по умолчанию
- `*args`, `**kwargs`
- `lambda`

Это следующие дни плана.
