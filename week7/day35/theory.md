# Том 1 — Итоговый конспект

## 1. Модель выполнения

- Всё в Python — объект.
- Переменная — это имя, привязанное к объекту.
- Присваивание не копирует объект, а создаёт новую ссылку.
- Поведение кода определяется сочетанием: поиск атрибутов + изменяемость типа + мутация или переназначение.

---

## 2. Изменяемость

### Immutable

- int
- float
- str
- tuple

Операции создают новый объект.

### Mutable

- list
- dict
- set
- пользовательские объекты

Методы могут изменять объект на месте.

---

## 3. Операции `+` и `+=`

- `x = x + y` — всегда создаётся новый объект.
- `x += y` — сначала вызывается `__iadd__`.
  - если тип поддерживает in-place изменение → объект мутируется
  - иначе создаётся новый объект

Особенно осторожно использовать `+=` с изменяемыми объектами.

---

## 4. Аргументы по умолчанию

Значения аргументов по умолчанию вычисляются один раз — в момент определения функции.

Опасность возникает, если:

- значение по умолчанию — изменяемый объект
- он мутируется внутри функции

Безопасный паттерн:

```python
def f(x, arg=None):
    if arg is None:
        arg = []
```

---

## 5. Передача аргументов

Python передаёт аргументы как присваивание имени объекту.

Внутри функции:

- можно мутировать объект → изменения видны снаружи
- можно переназначить имя → внешний объект не изменится

---

## 6. Атрибуты класса и экземпляра

Поиск атрибута:

1. Сначала в экземпляре (`obj.__dict__`)
2. Затем в классе
3. Далее по иерархии наследования

Мутация атрибута класса через экземпляр изменяет общий объект.
Переназначение через `self.attr = ...` создаёт атрибут экземпляра.

---

## 7. Частые ловушки

- Изменяемые default-аргументы
- Разделяемые списки на уровне класса
- Непонимание разницы между мутацией и переназначением
- Использование `is` вместо `==`

---

## Итоговая модель

При анализе любого кода задавать три вопроса:

1. Где лежит объект?
2. Мутируется ли он?
3. Создаётся ли новый объект или переназначается имя?

Если ответы ясны — поведение кода предсказуемо.
